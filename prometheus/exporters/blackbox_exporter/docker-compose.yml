version: "3"

# test with https://up.example.ir/probe?target=matrix.azadresan.ir&module=http_2xx&debug=true
services:
  blackbox:
    image: prometheus/blackbox-exporter:latest
    extra_hosts:
      - "example.ir:192.168.122.117"
      - "up.example.ir:192.168.122.117"
      - "metrics.example.ir:192.168.122.117"
    build:
      context: .
      dockerfile: Dockerfile
    container_name: blackbox_exporter
    restart: always
    tty: true
    volumes:
      - ./:/config
    ports:
      - 9115:9115/tcp
    command:
      - --config.file=/config/blackbox.yml
