services:
  nginx:
    image: nginx:1.23.1-alpine
    restart: unless-stopped
    volumes:
      - ./snippets:/etc/nginx/snippets
      - ./vhost.d:/etc/nginx/vhost.d
      - ./modules:/usr/lib/nginx/modules:ro
      - ./volumes/html:/usr/share/nginx/html:ro
      - ./volumes/html:/etc/nginx/html:ro
      - ./${DIR}/certs:/var/www/certs
      - ./${DIR}/default:/etc/nginx/default
      - ./${DIR}/conf:/etc/nginx/sites-enabled
      - ./${DIR}/nginx.conf:/etc/nginx/nginx.conf
    network_mode: host
    extra_hosts:
      - "devopsy.lr:192.168.122.117"
      - "up.devopsy.lr:192.168.122.117"
      - "metrics.devopsy.lr:192.168.122.117"
      - "monitor.devopsy.lr:192.168.122.117"
